<html>

 <head>

   
<style>
  
  div
  {

   background-color: #FFA500;
   padding: 5px;
  }

  input
  {
    width:500px;
  }
  
#registered-users
  {
    background-color = rgb(255, 255, 255);
  }
   </style>
  </head>

 <body>

   <div>
   <form action="#" id ="input-form">

   <label for="Name">Name</label></br></br>

   <input type="text" name="name" id = "user-name" </input></br></br>

     <label for="emailId">e-mail id</label></br></br>

     <input type="email" name="emailID" id = "user-email" ></input></br></br>



   <label for="phone">Phone </label></br></br>

    <input type="text" name="phone"  id = "user-phone" ></input></br></br>


   <button type="submit">Submit</button>

   </form>

</div>

  <ul id ="registered-users">
    
  </ul>
<script>
  let inputForm = document.getElementById("input-form");

inputForm.addEventListener("submit", addToStorage);



function addToStorage(e)
{
  e.preventDefault();
  let name = e.target.name.value;
  let emailid = e.target.emailID.value;
  let phone = e.target.phone.value;
  let userObj = {                  name: name,
                                    emailId: emailid,
                                    phone: phone
                };
  
                                    
localStorage.setItem(userObj.emailId, JSON.stringify(userObj));    
  showItem(userObj);
}
 
window.addEventListener("DOMContentLoaded", () => 
                        {
          Object.keys(localStorage).forEach((key)=>
                                            {
    let userDetailObj = JSON.parse(localStorage.getItem(key));
            showItem(userDetailObj);
      })
});


function showItem(user)
{
  document.getElementById('user-email').value = '';
  document.getElementById('user-name').value = '';
  document.getElementById('user-phone').value ='';
  if(localStorage.getItem(user.email) !== null)
  {
   removeUserFromScreen(user.email);
  }
  const parentNode = document.getElementById('registered-users');
  const childHTML = `<li id=${user.emailId}> ${user.name} - ${user.emailId}
                                        <button onclick = deleteUser("${user.emailId}")> Delete User </button>
                                        <button onclick=editUserDetails('${user.emailId}','${user.name}','${user.phone}')>Edit User </button>
                                     </li>`;

                parentNode.innerHTML = parentNode.innerHTML + childHTML;
}


function editUserDetails(emailId, name, phone){

                document.getElementById('user-email').value = emailId;
                document.getElementById('user-name').value = name;
                document.getElementById('user-phone').value = phone;

                deleteUser(emailId);
             }

function deleteUser(mailid)
{
                localStorage.removeItem(mailid);
                removeUserFromScreen(mailid);
}

function removeUserFromScreen(mailid)
{
  const parentNode = document.getElementById('registered-users');
                const childNodeToBeDeleted = document.getElementById(mailid);
                if(childNodeToBeDeleted) {
                    parentNode.removeChild(childNodeToBeDeleted)
                }
}
</script>
</body>

 </html>
